// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Organization {
  id                       String                     @id
  admin                    String
  name                     String
  imageCID                 String
  imageURL                 String?
  description              String?
  video                    String?
  blockNumber              Int?
  OrganizationDetailUpdate OrganizationDetailUpdate[]
}

enum OrganizationDetailUpdateType {
  AdminChange
  NameChange
  ImageCIDChange
}

model OrganizationDetailUpdate {
  transactionHash  String
  blockNumber      Int
  transactionIndex Int
  logIndex         Int
  type             OrganizationDetailUpdateType
  from             String
  to               String
  orgId            String
  org              Organization                 @relation(fields: [orgId], references: [id])

  @@id([transactionHash, blockNumber, transactionIndex, logIndex])
}
